language: go
install: go get -v github.com/spf13/hugo
script:
- hugo -v --ignoreCache
before_deploy: pip install --user awscli
deploy:
  provider: script
  access_key_id: AKIAJNGBFCZ4H7YV5KUA
  secret_access_key:
    secure: WAllNsR1Bq3rEtbn75QD+uwuyShrfeQwMZyP0xaxPOnt2pu2cKdLBgFob8cXguTEYphsK1x+Sn942rvqzyB4y0aVxH9p4zI8ocMtKEtAyvOpRo78kOGsAdmC2hKJ/hIIhdAPd08nI27NNljVuXq+SkTKtG9lJXj4F2RVA+fvtZkViUct1RWd2JrzSnbkEGQIUX5rCM0kZtS6G3ZOkCnJWzYIKICKcYhwUQmuUdPMVqbPLemauG+vC4eXqGUwmiphOJEXSiLcfxQMGBdRlkcTmdJII2x+sl8QK238X+D2/Z5RoeY8mQuo2l9Qgaja/CibFp9PmRaTcJRBOxIBfCiQG6TF3XvyxLMpjeafvBZVNGk7GoohttENahAApEbs+iWnikqO0+WFLg0ed3ImI/sxi9MeAdlBxxaGWCJAIFZzKVVJ4K+PvBn52QWnQCKaJ3icoA4YOT0+n+9ShLTvu9ZOAPd14gSDsm+zWYSVI4nhFhI1Sho/HKWUocHBkvzGAfO+AHv9tl+jNVX27VTH/+jn7S4yewrMNfKGgUbGHySQ9bS5yfTNrwh8q28ZrEEiNIq5So3TxXmc3eFN89jqT+AAdPGpBmV/9YbhYogqW+BpN71VLUL2gu6ibAWOpeARvDlZxsRn7vXDMEm9AksRs83YUgYTMkGrmz2pHQAodYlsd/w=
  script: ~/.local/bin/aws s3 sync public s3://somrc-website --region=us-east-1 --delete
  skip_cleanup: true
notifications:
  email:
    on_success: change
    on_failure: always
    recipients:
    - nem2p@virginia.edu
  slack:
    secure: S27Eetiy8VLj6jBz37wMX+9wl40PgdrHm347oIGFikJ+ci2XCkJCXyq+nDkt9YfYw83RA/sTezy6GbASxnYry5BItsUD1gJCcQ7YvUtAu7mjLcZZxd3mCJeydnPZOHFAPEPPwgH8EvD5sVwtPE/dluouG8aQdYSqji1ZiVAsLBr+PYIOrDeVDEYRE2hO0SUKfnxuVUnKwNVccahTeIcELXm8JGIhtf3/o+RkUT4YsjNQ2XH3RugGArcWvZex6WwZgeML83uPA0fuEb1nnBDkuRGsvJlgO6XNcaiDLyqQoj+LUNCzEjKcNWUrloFIR+I9nZBcqsWjmKtj3GA0Uzl678OJ5/CZvjmwjjrnbV7ENdde/MZXJr/MNq5mI6UZCayZJXrXNS4cVKI9ITWA09omEOhS3Z/FUiSR0MzldCnL9X5AP2MkxBUfW6c6vgb5Xkt8hB4BLHFNjvDew9oxWeHnPF5q+KsUEMJNk0cXPxNilgRfDd6YzCMQUzwi/e1eSX2QCK86ZDla+21QJQEgS+0ZnJQaxWFCg1swRoBw40828Mcz1N1BPV8X5n4QcKAgUyl2BfxVylWnEdua68YpCsU2U7T7bKUo2JxAbgpnG3P3g15o4R4EVK/r8Ztwnkqib9nVyMLTyC7QGLjGLQ/F2Hjvp+QfNZ6DnXITP4CHfkLE+3Q=
    on_success: change
    on_failure: always
